# Идеи для улучшения проекта

## 1. Агенты и пайплайн

- **Fact-Checker агент** — добавить 4-го агента между Writer и Editor, который проверяет утверждения из статьи на соответствие брифу и помечает неподтверждённые факты.
- **SEO агент** — анализирует статью и добавляет мета-описание, ключевые слова, alt-тексты для изображений.
- **Параллельный ресёрч** — запускать несколько Researcher-агентов по подтемам одновременно (CrewAI поддерживает `Process.hierarchical`).
- **Менеджер (Manager Agent)** — переключить на `Process.hierarchical`, добавить менеджера, который сам решает, каким агентам делегировать подзадачи.

## 2. Инструменты агентов

- **Wikipedia Tool** — добавить `WikipediaQueryRun` из `crewai-tools` для Researcher как fallback при отсутствии Serper.
- **YouTube Transcript Tool** — извлекать транскрипты видео по теме (библиотека `youtube_transcript_api` уже есть в venv).
- **PDF Reader Tool** — загружать и читать PDF-источники (библиотека `pymupdf` уже есть в venv).
- **RAG (векторное хранилище)** — сохранять брифы в ChromaDB (уже в venv) и переиспользовать при похожих темах.

## 3. Качество вывода

- **Валидация результата** — проверять минимальную длину статьи; если редактор вернул слишком короткий текст, автоматически запрашивать доработку.
- **Структурированный вывод** — использовать Pydantic-модель для выходных данных (`title`, `summary`, `body`, `sources[]`), вместо сырой строки.
- **Оценка качества** — после генерации запускать отдельный вызов LLM с рубрикой (релевантность, достоверность, читаемость) и сохранять оценку в JSON.

## 4. Streamlit UI

- **Прогресс в реальном времени** — использовать `st.empty()` + `threading` или callback CrewAI для отображения лога агентов по мере выполнения.
- **Предпросмотр брифа** — показывать промежуточный результат Researcher до финальной статьи.
- **Редактирование результата** — добавить `st.text_area` для ручной правки сгенерированной статьи прямо в UI перед сохранением.
- **Сравнение версий** — при регенерации по той же теме показывать diff между старой и новой статьёй.
- **Тёмная тема / брендинг** — добавить кастомный `config.toml` для Streamlit.

## 5. Хранение и история

- **Полнотекстовый поиск по истории** — индексировать `output/*.md` через простой SQLite FTS для поиска по содержимому.
- **Теги и категории** — сохранять в JSON автоматически определённую категорию темы (технологии, финансы, здоровье и т.д.).
- **Экспорт в другие форматы** — конвертировать `.md` → PDF, HTML, DOCX через `pandoc` или `weasyprint`.
- **Облачное хранилище** — опциональный экспорт в Notion, Google Docs или S3.

## 6. Конфигурация и DevOps

- **Поддержка других LLM** — вынести выбор модели в UI (GPT-4o, GPT-4o-mini, Claude, Mistral), использовать `litellm` через CrewAI.
- **Кэширование** — использовать встроенный кэш CrewAI (`cache=True`) чтобы не тратить токены при повторных запросах с теми же параметрами.
- **`.env` через UI** — форма в сайдбаре для ввода API-ключей (сохранение в `st.session_state`), чтобы не редактировать `.env` вручную.
- **Docker** — добавить `Dockerfile` и `docker-compose.yml` для одной команды запуска.
- **Тесты** — написать unit-тесты для `utils.py` (`slugify`, `timestamp`, `get_history`) и интеграционный тест с mock-LLM.

## 7. Безопасность

- **Санитизация топика** — ограничить длину и символы в поле Topic перед передачей в промпт.
- **Rate limiting** — добавить задержку между запросами к Serper, чтобы не превышать квоту.
